x <- read.csv("hw1_data.csv")
View(x)
View(x)
x[1:2,]
x[-2:-1,]
x[-1:-2,]
x[-1:2,]
head(x,2)
tail(x,2)
x$Ozone[47]
sum(is.na(x$Ozone))
mean(na.omit(x$Ozone))
subx <- x[x$Ozone>31 & x$Temp >90,]
subx <- x[x$Ozone>31 & x$Temp >90,]
mean(subx$Solar.R)
mean(subx$Solar.R,na.rm = T)
mean(x$Temp[x$Month==6],na.rm = T)
max(x$Ozone[x$Month==5],na.rm = T)
install.packages("swirl")
library(swirl)
install_from_swirl("R Programming")
swirl()
5+7
x <- 5+7
x
y <- x-3
y
z <- c(1.1,9,3.14)
?c
z
c(z,555,z)
z*2+100
my_sqrt <- sqrt(z-1)
my_sqrt
my_div <- z/my_sqrt
my_div
c(1,2,3,4)+c(0,10)
c(1,2,3,4)+c(0,10,100)
z*2+1000
my_div
library(swirl)
swirl()
getwd()
ls()
x <- 9
ls()
list.files()
?list.files
args(list.files)
old.dir <- getwd()
dir.create("testdir")
setwd("testdir/")
file.create("mytest.R")
ls()
list.files()
file.exists("mytest.R")
file.info(mytest.R)
file.info("mytest.R")
file.rename("mytest.R","mytest2.R")
file.copy("mytest2.R","mytest3.R")
file.path("mytest3.R")
file.path(c('folder1','folder2'))
file.path('folder1','folder2')
?dir.create
dir.create(file.path("testdir2/testdir3"),recursive = T)
dir.create(file.path("testdir2/testdir3/"),recursive = TRUE)
info()
dir.create(file.path("testdir2/testdir3/"),recursive = TRUE)
dir.create(file.path("testdir2/testdir3/"),recursive = TRUE)
dir.create(file.path("testdir2","testdir3"),recursive = TRUE)
setwd(old.dir)
library(swirl)
swirl()
1:20
pi:10
15:1
?`:`
seq(1,20)
seq(0,10,by = 0.5)
seq(5,10,length=30)
my_seq <- seq(5,10,length=30)
length(my_seq)
1:length(my_seq)
seq(along.with=my_seq)
seq_along(my_seq)
rep(0,times=40)
rep(c(0,1,2),times=10)
rep(c(0,1,2),each=10)
num_vect <- c(0.5,55,-10,6)
tf <- num_vect<1
tf
tf2 <- num_vect>=6
num_vect>=6
my_char <- c("My","name","is")
my_char
paste(my_char,collapse = " ")
my_name <- c(my_char,"Jiayue")
my_name
paste(my_name,collapse = " ")
paste("Hello","world",sep = " ")
paste("Hello","world!",sep = " ")
paste(1:3,c("X","Y","Z"),sep = "")
paste(LETTERS,1:4,sep = "-")
x <- c(44,NA,5,NA)
x*3
y <- rnorm(1000)
z <- rep(NA,1000)
my_data <- sample(c(y,z),100)
my_na <- is.na(my_data)
my_na
my_data==NA
sum(my_na)
my_data
0/0
Inf-Inf
x
x[1:10]
x[is.na(x)]
y <- x[!is.na(x)]
y
y[y>0]
x[x>0]
x[!is.na(x) & x>0]
x[c(3,5,7)]
x[0]
x[3000]
x[c(-2,-10)]
x[-c(2,10)]
vector <- c(foo=1,bar=2,norf=NA)
vect <- c(foo=1,bar=2,norf=NA)
vect <- c(foo=11, bar=2, norf=NA)
vect
names(vect)
vect2 <- c(11,2,NA)
names(vect2 <- c("foo","bar","norf"))
names(vect2) <- c("foo","bar","norf"))
names(vect2) <- c("foo","bar","norf")
identical(vect,vect2)
vect["bar"]
vect[c("foo","bar")]
library(swirl)
swirl()
my_vecotr <- 1:20
my_vector <- 1:20
my_vector
dim(my_vector)
length(my_vector)
dim(my_vector) <- c(4,5)
dim(my_vector)
attributes(my_vector)
my_vector
class(my_vector)
my_matrix <- my_vector
?matix
?matrix
my_matrix2 <- matrix(1:20,4,5)
identical(my_matrix,my_matrix2)
patients <- c('Bill','Gina','Kelly','Sean')
cbind(patients,my_matrix)
my_data <- data.frame(patients,my_matrix)
my_data
class(my_data)
cnames <- c('patient','age','weight','bp','rating','test')
colnames(my_data) <- cnames
my_data
install.packages('slidify')
a <- available.packages()
View(a)
head(rownames(a),3)
'slidify' %in% rownames(a)
install.packages('devtools')
source("http://bioconductor.org/biocLite.R")
biocLite(c("GeomicFeatures","AnnotationDbi"))
library(ggplot2)
search()
install.packages('installr')
library(installr)
updater()
library(KernSmooth)
library(installr)
updateR()
add2 <- function(x,y){
x+y
}
above10 <- function(x){
use <- x>10
x[use]
}
above <- function(x,n){
use <- x>n
x[use]
}
x <- 1:20
above(x)
above(x,12)
above <- function(x,n = 10){
use <- x>n
x[use]
}
above(x)
columnmean <- function(y){
nc <- ncol(y)
means <- numeric(nc)
for (i in 1:nc){
means[i] <- mean(y[,i])
}
means
}
columnmean(airquality)
columnmean <- function(y, removeNA = TRUE){
nc <- ncol(y)
means <- numeric(nc)
for (i in 1:nc){
means[i] <- mean(y[,i],na.rm = removeNA)
}
means
}
columnmean(airquality)
columnmean(airquality,F)
str(str)
str(str)
str(lm)
str(ls)
x <- rnorm(100,2,4)
summary(x)
str(x)
f <- gl(40,10)
str(f)
f
summary(f)
library(datasets)
head(airquality)
str(airquality)
m <- matrix(rnorm(100),10,10)
str(m)
m[,1]
s <- split(airquality,airquality$Month)
s
str(s)
x <- rnorm(10)
x
x <- rnorm(10,20,2)
x
summary(x)
set.seed(1)
rnorm(5)
rnorm(5)
set.seed(1)
rnorm(5)
rpois(10,1)
rpois(10,2)
rpois(10,20)
ppois(2,2)
ppois(4,2)
ppois(6,2)
set.seed(20)
x <- rnorm(100)
e <- rnorm(100,0,2)
y <- 0.5+2*x+e
summary(y)
plot(x,y)
plot(x,y)
set.seed(10)
x <- rbinom(100,1,0.5)
e <- rnorm(100,0,2)
y <- 0.5+x*2+e
plot(x,y)
set.seed(1)
x <- rnorm(100)
log.mu <- 0.5+0.3*x
y <- rpois(100,exp(log.mu))
summary(y)
plot(x,y)
set.seed(1)
sample(1:10,4)
sample(1:10,4)
sample(letters,5)
sample(1:10)
sample(1:10)
sample(1:10,replace = TRUE)
system.time(readLines("http://www.jhsph.edu"))
hilbert <- function(n){
i <- 1:n
1/outer(i-1,i,"+")
}
hilbert <- function(n){
i <- 1:n
1/outer(i-1,i,"+")
}
x <- hilbert(1000)
system.time(svd(x))
x
system.time(svd(x))
system.time({
n <- 1000
r <- numeric(n)
for(i in 1:n){
x <- rnorm(n)
r[i] <- mean(x)
}
})
sample.interval=1000
sample.interval=10000
set.seed(1)
rpois(5, 2)
outcome <- read.csv("C2W4 Assignment/outcome-of-care-measures.csv", colClasses = "character")
outcome <- read.csv("C2W4 Assignment/outcome-of-care-measures.csv", colClasses = "character")
head(outcome)
outcome[,11] <- as.numeric(outcome[,11])
hist(outcome[,11])
hist(outcome[,11])
statels <- unique(outcome$State)
statels
outcomels <- c("hear attack","heart failure","pneumonia")
state <- "NY"
!state %in% statels
library(Hmisc)
capitalize("hear attack")
capitalize("heart attack")
library(stringr)
str_to_title("heart attack")
outcome_dt <- read.csv("C2W4 Assignment/outcome-of-care-measures.csv", colClasses = "character")
statels <- unique(outcome_dt$State)
outcomels <- c("hear attack","heart failure","pneumonia")
outcome <- "heart attack"
colnm <- paste(" Hospital 30-Day Death (Mortality) Rates from",str_to_title(outcome),sep =" " )
colnm
x <- outcome_dt[colnm]
x <- outcome_dt[[colnm]]
x
names(outcome_dt)
colnames(outcome_dt)
colnames(outcome_dt)[17]
str_to_title(outcome)
chartr(" ",".",str_to_title(outcome))
colnm <- paste(" Hospital.30.Day.Death..Mortality..Rates.from",chartr(" ",".",str_to_title(outcome)),sep ="." )
x <- outcome_dt[[colnm]]
colnm %in% names(outcome_dt)
colnm
colnames(outcome_dt)[17]
colnames(outcome_dt)[11]
colnm <- paste("Hospital.30.Day.Death..Mortality..Rates.from",chartr(" ",".",str_to_title(outcome)),sep ="." )
x <- outcome_dt[[colnm]]
x <- as.numeric(outcome_dt[[colnm]])
part <- data.frame(outcome_dt$State,x)
part <- data.frame(outcome_dt$Hospital.Name,outcome_dt$State,x)
dt <- data.frame(outcome_dt$Hospital.Name,outcome_dt$State,x)
part <- dt[dt$outcome_dt.State==state,]
part$outcome_dt.Hospital.Name[which.min(part$x)]
?which.min
which.min(c(1,2,NA,4))
which.min(c(1,1,2,NA,4))
part <- na.omit(dt[dt$outcome_dt.State==state,])
part <- part[order(part$outcome_dt.Hospital.Name)]
part <- part[order(part$outcome_dt.Hospital.Name),]
head(part)
head(part$outcome_dt.Hospital.Name)
source("best.R")
source("C2W4 Assignment/best.R")
best("TX", "heart attack")
source("C2W4 Assignment/best.R")
best("TX", "heart attack")
source("C2W4 Assignment/best.R")
best("TX", "heart attack")
best("TX", "heart failure")
best("MD", "heart attack")
best("BB", "heart attack")
best("NY", "hert attack")
outcome_dt <- read.csv("C2W4 Assignment/outcome-of-care-measures.csv", colClasses = "character")
state <- "NY"
outcome <- "heart attack"
statels <- unique(outcome_dt$State)
outcomels <- c("heart attack","heart failure","pneumonia")
colnm <- paste("Hospital.30.Day.Death..Mortality..Rates.from",chartr(" ",".",str_to_title(outcome)),sep ="." )
x <- as.numeric(outcome_dt[[colnm]])
dt <- data.frame(outcome_dt$Hospital.Name,outcome_dt$State,x)
part <- na.omit(dt[dt$outcome_dt.State==state,])
part <- part[order(part$outcome_dt.Hospital.Name),]
part$rank <- rank(part$x)
part
part$rank <- rank(part$x,ties.method = "first")
head(part)
part[order(part$rank)]
part[order(part$rank),]
source("C2W4 Assignment/rankhospital.R")
source("C2W4 Assignment/rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
rankhospital("MN", "heart attack", 5000)
source("C2W4 Assignment/rankhospital.R")
rankhospital("MN", "heart attack", 5000)
outcome="heart attack"
outcome_dt <- read.csv("C2W4 Assignment/outcome-of-care-measures.csv", colClasses = "character")
statels <- unique(outcome_dt$State)
outcomels <- c("heart attack","heart failure","pneumonia")
colnm <- paste("Hospital.30.Day.Death..Mortality..Rates.from",chartr(" ",".",str_to_title(outcome)),sep ="." )
x <- as.numeric(outcome_dt[[colnm]])
dt <- data.frame(outcome_dt$Hospital.Name,outcome_dt$State,x)
dtls <- split(dt,dt$outcome_dt.State)
dtls[[1]]
rankhospital <- function(x){
x <- x[order(x$outcome_dt.Hospital.Name),]
x$rank <- rank(x$x,ties.method = "first")
if (num=="best"){
data.frame(hospital=x$outcome_dt.Hospital.Name[x$rank==1],state=x$outcome_dt.State[1])
}
else if (num=="worst"){
data.frame(hospital=x$outcome_dt.Hospital.Name[x$rank==nrow(x)],state=x$outcome_dt.State[1])
}
else if (num >= nrow(x)){
data.frame(hospital=NA,state=x$outcome_dt.State[1])
}
else {
data.frame(hospital=x$outcome_dt.Hospital.Name[x$rank==num],state=x$outcome_dt.State[1])
}
}
sapply(dtls,rankhospital)
num="best"
sapply(dtls,rankhospital)
num="best"
sapply(dtls,rankhospital)
rankhospital <- function(x){
x <- x[order(x$outcome_dt.Hospital.Name),]
x$rank <- rank(x$x,ties.method = "first")
if (num=="best"){
data.frame(hospital=x$outcome_dt.Hospital.Name[x$rank==1],state=x$outcome_dt.State[1])
}
else if (num=="worst"){
data.frame(hospital=x$outcome_dt.Hospital.Name[x$rank==nrow(x)],state=x$outcome_dt.State[1])
}
else if (num >= nrow(x)){
data.frame(hospital=NA,state=x$outcome_dt.State[1])
}
else {
data.frame(hospital=x$outcome_dt.Hospital.Name[x$rank==num],state=x$outcome_dt.State[1])
}
}
rankhospital(dtls[[1]])
rankhospital(dtls[[2]])
lapply(dtls,rankhospital)
sapply(dtls,rankhospital)
rls <- lapply(dtls,rankhospital)
do.call(rbind,rls)
source("C2W4 Assignment/rankall.R")
head(rankall("heart attack", 20), 10)
source("C2W4 Assignment/rankall.R")
head(rankall("heart attack", 20), 10)
tail(rankall("pneumonia", "worst"), 3)
tail(rankall("heart failure"), 10)
source("C2W4 Assignment/best.R")
best("SC", "heart attack")
best("NY", "pneumonia")
best("AK", "pneumonia")
source("C2W4 Assignment/rankhospital.R")
rankhospital("NC", "heart attack", "worst")
rankhospital("WA", "heart attack", 7)
rankhospital("TX", "pneumonia", 10)
rankhospital("NY", "heart attack", 7)
r <- rankall("heart attack", 4)
as.character(subset(r, state == "HI")$hospital)
r <- rankall("pneumonia", "worst")
as.character(subset(r, state == "NJ")$hospital)
r <- rankall("heart failure", 10)
as.character(subset(r, state == "NV")$hospital)
